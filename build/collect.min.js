var collection=(function(e,t){var n=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,__copyProps=(e,t,n,o)=>{if(t&&typeof t==`object`||typeof t==`function`)for(var c=a(t),l=0,u=c.length,d;l<u;l++)d=c[l],!s.call(e,d)&&d!==n&&r(e,d,{get:(e=>t[e]).bind(null,d),enumerable:!(o=i(t,d))||o.enumerable});return e},__toESM=(e,t,i)=>(i=e==null?{}:n(o(e)),__copyProps(t||!e||!e.__esModule?r(i,`default`,{value:e,enumerable:!0}):i,e));t=__toESM(t);function falsyValue(e){if(Array.isArray(e)){if(e.length)return!1}else if(typeof e==`object`&&e){if(Object.keys(e).length)return!1}else if(e)return!1;return!0}function filterObject(e,t={}){let n={};return Object.keys(t).forEach(r=>{e?e(t[r],r)&&(n[r]=t[r]):falsyValue(t[r])||(n[r]=t[r])}),n}function filterArray(e,t={}){if(e)return t.filter(e);let n=[];for(let e=0;e<t.length;e+=1){let r=t[e];falsyValue(r)||n.push(r)}return n}let isArray=e=>Array.isArray(e),isObject=e=>typeof e==`object`&&Array.isArray(e)===!1&&e!==null,isFunction=e=>typeof e==`function`;function buildKeyPathMap(e){let t={};return e.forEach((e,n)=>{function buildKeyPath(e,n){isObject(e)?Object.keys(e).forEach(t=>{buildKeyPath(e[t],`${n}.${t}`)}):isArray(e)&&e.forEach((e,t)=>{buildKeyPath(e,`${n}.${t}`)}),t[n]=e}buildKeyPath(e,String(n))}),t}function clone(e){return Array.isArray(e)?[...e]:{...e}}function variadic(e){return Array.isArray(e[0])?e[0]:e}function deleteKeys(e,...t){variadic(t).forEach(t=>{delete e[t]})}function values(e){let t=[];return Array.isArray(e)?t.push(...e):e.constructor.name===`Collection`?t.push(...e.all()):typeof e==`object`&&t.push(...Object.values(e)),t}let inspect=e=>t.default.inspect(e,{showHidden:!1,depth:2,colors:!0,compact:!0});function nestedValue(e,t){try{return t.split(`.`).reduce((e,t)=>e[t],e)}catch{return e}}var c=class Collection{items;constructor(e){e!==void 0&&!Array.isArray(e)&&typeof e!=`object`?this.items=[e]:e instanceof Collection?this.items=e.all():this.items=e||[]}add(e){return this.items.push(e),this}all(){return this.items}average(e){return this.avg(e)}avg(e){return Array.isArray(this.items)?e===void 0?this.sum()/this.items.length:isFunction(e)?new Collection(this.items).sum(e)/this.items.length:new Collection(this.items).pluck(e).sum()/this.items.length:0}chunk(e){let t=[],n=0;if(Array.isArray(this.items))do{let r=new Collection(this.items.slice(n,n+e));t.push(r),n+=e}while(n<this.items.length);else if(typeof this.items==`object`){let r=Object.keys(this.items);do{let i=r.slice(n,n+e),a=new Collection({});i.forEach(e=>a.put(e,this.items[e])),t.push(a),n+=e}while(n<r.length)}else t.push(new Collection([this.items]));return new Collection(t)}collapse(){return new Collection([].concat(...values(this.items)))}combine(e){let t=e;t instanceof Collection&&(t=e instanceof Collection?e.all():e);let n={};return Array.isArray(this.items)&&Array.isArray(t)?this.items.forEach((e,r)=>{n[e]=t[r]}):typeof this.items==`object`&&typeof t==`object`?Object.keys(this.items).forEach((e,r)=>{n[this.items[e]]=t[Object.keys(t)[r]]}):Array.isArray(this.items)?n[this.items[0]]=t:typeof this.items==`string`&&Array.isArray(t)?[n[this.items]]=t:typeof this.items==`string`&&(n[this.items]=t),new Collection(n)}concat(e){let t;t=e instanceof Collection?e.all():Array.isArray(e)?e:[...Object.values(e)];let n=new Collection(clone(this.items));return t.forEach(e=>{isObject(e)?Object.keys(e).forEach(t=>n.push(e[t])):n.push(e)}),n}contains(e,t){if(t!==void 0)return Array.isArray(this.items)?this.items.filter(n=>n[e]!==void 0&&n[e]===t).length>0:this.items[e]!==void 0&&this.items[e]===t;if(isFunction(e))return Array.isArray(this.items)?this.items.filter((t,n)=>e(t,n)).length>0:Object.entries(this.items).filter((t,n)=>e(t,n)).length>0;if(Array.isArray(this.items))return this.items.indexOf(e)!==-1;let n=values(this.items);return n.push(...Object.keys(this.items)),n.indexOf(e)!==-1}containsOneItem(){return this.count()===1}count(){let e=0;return Array.isArray(this.items)&&(e=this.items.length),Math.max(Object.keys(this.items).length,e)}countBy(e=e=>e){return new Collection(this.items).groupBy(e).map(e=>e.count())}crossJoin(...e){function join(e,...t){let n=t[0];n instanceof Collection&&(n=n.all());let r=t.slice(1),i=!r.length,a=[];for(let t=0;t<n.length;t+=1){let o=e.slice();o.push(n[t]),i?a.push(o):a=a.concat(join(o,...r))}return a}return new Collection(join([],this.items,...e))}dd(...e){this.dump(e),typeof process<`u`&&process.exit(1)}diff(e){let t;return t=e instanceof Collection?e.all():e,new Collection(this.items.filter(e=>t.indexOf(e)===-1))}diffAssoc(e){let t=e;e instanceof Collection&&(t=e.all());let n={};return Object.keys(this.items).forEach(e=>{(t[e]===void 0||t[e]!==this.items[e])&&(n[e]=this.items[e])}),new Collection(n)}diffKeys(e){let t;t=e instanceof Collection?e.all():e;let n=Object.keys(t),r=Object.keys(this.items).filter(e=>n.indexOf(e)===-1);return new Collection(this.items).only(r)}diffUsing(e,t){let n;return n=Array.isArray(this.items)?this.items:Object.entries(this.items),new Collection(n.filter(n=>!(e&&e.some(e=>t(Array.isArray(n)?n[1]:n,e)===0))))}doesntContain(e,t){return!this.contains(e,t)}dot(){if(!isObject(this.items))return this;let e={},stringify=(t,n)=>{let r=Object.entries(t);for(let t=0;t<r.length;t+=1){let[i,a]=r[t],o=i;n&&(o=n+`.`+o),isObject(a)?stringify(a,o):e[o]=a}};return stringify(this.items),new Collection(e)}dump(...e){return console.log(inspect(this)),e.forEach(e=>{console.log(inspect(e))}),this}duplicates(){let e=[],t={},stringifiedValue=e=>Array.isArray(e)||typeof e==`object`?JSON.stringify(e):e;return Array.isArray(this.items)?this.items.forEach((n,r)=>{let i=stringifiedValue(n);e.indexOf(i)===-1?e.push(i):t[r]=n}):typeof this.items==`object`&&Object.keys(this.items).forEach(n=>{let r=stringifiedValue(this.items[n]);e.indexOf(r)===-1?e.push(r):t[n]=this.items[n]}),new Collection(t)}each(e){let t=!1;if(Array.isArray(this.items)){let{length:n}=this.items;for(let r=0;r<n&&!t;r+=1)t=e(this.items[r],r,this.items)===!1}else{let n=Object.keys(this.items),{length:r}=n;for(let i=0;i<r&&!t;i+=1){let r=n[i];t=e(this.items[r],r,this.items)===!1}}return this}eachSpread(e){return this.each((t,n)=>{e(...t,n)}),this}every(e){return values(this.items).every(e)}except(...e){let t=variadic(e);if(Array.isArray(this.items))return new Collection(this.items.filter(e=>t.indexOf(e)===-1));let n={};return Object.keys(this.items).forEach(e=>{t.indexOf(e)===-1&&(n[e]=this.items[e])}),new Collection(n)}filter(e){let t=e||!1,n=null;return n=Array.isArray(this.items)?filterArray(t,this.items):filterObject(t,this.items),new Collection(n)}first(e,t){if(isFunction(e)){let n=Object.keys(this.items);for(let t=0;t<n.length;t+=1){let r=n[t],i=this.items[r];if(e(i,r))return i}return isFunction(t)?t():t}if(Array.isArray(this.items)&&this.items.length||Object.keys(this.items).length){if(Array.isArray(this.items))return this.items[0];let e=Object.keys(this.items)[0];return this.items[e]}return isFunction(t)?t():t}firstOrFail(e,t,n){if(isFunction(e))return this.first(e,()=>{throw Error(`Item not found.`)});let r=this.where(e,t,n);if(r.isEmpty())throw Error(`Item not found.`);return r.first()}firstWhere(e,t,n){return this.where(e,t,n).first()}flatMap(e){return this.map(e).collapse()}flatten(e){let t=e||1/0,n=!1,r=[],i=function flat$1(e){r=[],isArray(e)?e.forEach(e=>{isArray(e)?r=r.concat(e):isObject(e)?Object.keys(e).forEach(t=>{r=r.concat(e[t])}):r.push(e)}):Object.keys(e).forEach(t=>{isArray(e[t])?r=r.concat(e[t]):isObject(e[t])?Object.keys(e[t]).forEach(n=>{r=r.concat(e[t][n])}):r.push(e[t])}),n=r.filter(e=>isObject(e)).length===0,--t};for(i(this.items);!n&&t>0;)i(r);return new Collection(r)}flip(){let e={};return Array.isArray(this.items)?Object.keys(this.items).forEach(t=>{e[this.items[t]]=Number(t)}):Object.keys(this.items).forEach(t=>{e[this.items[t]]=t}),new Collection(e)}forget(e){return Array.isArray(this.items)?this.items.splice(e,1):delete this.items[e],this}forPage(e,t){let n={};return Array.isArray(this.items)?n=this.items.slice(e*t-t,e*t):Object.keys(this.items).slice(e*t-t,e*t).forEach(e=>{n[e]=this.items[e]}),new Collection(n)}get(e,t){if(this.items[e]!==void 0)return this.items[e];if(isFunction(t))return t();if(t!==null)return t}groupBy(e){let t={};return Array.isArray(this.items)?this.items.forEach((n,r)=>{let i;i=isFunction(e)?e(n,r):nestedValue(n,e)||nestedValue(n,e)===0?nestedValue(n,e):``,t[i]===void 0&&(t[i]=new Collection([])),t[i].push(n)}):Object.keys(this.items).forEach(n=>{let r;r=isFunction(e)?e(this.items[n],n):nestedValue(this.items[n],e)||nestedValue(this.items[n],e)===0?nestedValue(this.items[n],e):``,t[r]===void 0&&(t[r]=new Collection([])),t[r].push(this.items[n])}),new Collection(t)}has(...e){let t=variadic(e);return t.filter(e=>Object.hasOwnProperty.call(this.items,e)).length===t.length}implode(e,t){return t===void 0&&Array.isArray(this.items)?this.items.join(String(e)):new Collection(this.items).pluck(e).all().join(t)}intersect(e){let t=e;return e instanceof Collection&&(t=e.all()),new Collection(this.items.filter(e=>t.indexOf(e)!==-1))}intersectByKeys(e){let t=Object.keys(e);e instanceof this.constructor&&(t=Object.keys(e.all()));let n={};return Object.keys(this.items).forEach(e=>{t.indexOf(e)!==-1&&(n[e]=this.items[e])}),new Collection(n)}isEmpty(){return Array.isArray(this.items)?!this.items.length:!Object.keys(this.items).length}isNotEmpty(){return!this.isEmpty()}join(e,t){let n=this.values();if(t===void 0)return n.implode(e);let r=n.count();if(r===0)return``;if(r===1)return n.last();let i=n.pop();return n.implode(e)+t+i}keyBy(e){let t={};return isFunction(e)?this.items.forEach(n=>{t[e(n)]=n}):this.items.forEach(n=>{let r=nestedValue(n,e);t[r||``]=n}),new Collection(t)}keys(){let e=Object.keys(this.items);return Array.isArray(this.items)&&(e=e.map(Number)),new Collection(e)}last(e,t){let{items:n}=this;if(isFunction(e)&&(n=this.filter(e).all()),Array.isArray(n)&&!n.length||!Object.keys(n).length)return isFunction(t)?t():t;if(Array.isArray(n))return n[n.length-1];let r=Object.keys(n);return n[r[r.length-1]]}macro(e,t){this.constructor.prototype[e]=t}make(e=[]){return new Collection(e)}map(e){if(Array.isArray(this.items))return new Collection(this.items.map(e));let t={};return Object.entries(this.items).forEach(([n,r])=>{t[n]=e(r,n)}),new Collection(t)}mapInto(e){return this.map((t,n)=>new e(t,n))}mapSpread(e){return this.map((t,n)=>e(...t,n))}mapToDictionary(e){let t={};return this.items.forEach((n,r)=>{let[i,a]=e(n,r);t[i]===void 0?t[i]=[a]:t[i].push(a)}),new Collection(t)}mapToGroups(e){let t={};return this.items.forEach((n,r)=>{let[i,a]=e(n,r);t[i]===void 0?t[i]=[a]:t[i].push(a)}),new Collection(t)}mapWithKeys(e){let t={};return Array.isArray(this.items)?this.items.forEach((n,r)=>{let[i,a]=e(n,r);t[i]=a}):Object.keys(this.items).forEach(n=>{let[r,i]=e(this.items[n],n);t[r]=i}),new Collection(t)}max(e){if(typeof e==`string`){let t=this.items.filter(t=>t[e]!==void 0);return Math.max(...t.map(t=>t[e]))}return Math.max(...this.items)}median(e){let{length:t}=this.items;return e===void 0?t%2==0?(this.items[t/2-1]+this.items[t/2])/2:this.items[Math.floor(t/2)]:t%2==0?(this.items[t/2-1][e]+this.items[t/2][e])/2:this.items[Math.floor(t/2)][e]}merge(e){let t=e;if(typeof t==`string`&&(t=[t]),Array.isArray(this.items)&&Array.isArray(t))return new Collection(this.items.concat(t));let n=JSON.parse(JSON.stringify(this.items));return Object.keys(t).forEach(e=>{n[e]=t[e]}),new Collection(n)}mergeRecursive(e){let merge=(e,t)=>{let n={};return Object.keys({...e,...t}).forEach(r=>{e[r]===void 0&&t[r]!==void 0?n[r]=t[r]:e[r]!==void 0&&t[r]===void 0?n[r]=e[r]:e[r]!==void 0&&t[r]!==void 0&&(e[r]===t[r]?n[r]=e[r]:!Array.isArray(e[r])&&typeof e[r]==`object`&&!Array.isArray(t[r])&&typeof t[r]==`object`?n[r]=merge(e[r],t[r]):n[r]=[].concat(e[r],t[r]))}),n};return e?e instanceof Collection?new Collection(merge(this.items,e.all())):new Collection(merge(this.items,e)):this}min(e){if(e!==void 0){let t=this.items.filter(t=>t[e]!==void 0);return Math.min(...t.map(t=>t[e]))}return Math.min(...this.items)}mode(e){let t=[],n=1;return this.items.length?(this.items.forEach(r=>{let i=t.filter(t=>e===void 0?t.key===r:t.key===r[e]);if(!i.length)e===void 0?t.push({key:r,count:1}):t.push({key:r[e],count:1});else{i[0].count+=1;let{count:e}=i[0];e>n&&(n=e)}}),t.filter(e=>e.count===n).map(e=>e.key)):null}nth(e,t){return new Collection(values(this.items).slice(t).filter((t,n)=>n%e===0))}only(...e){let t=variadic(e);if(Array.isArray(this.items))return new Collection(this.items.filter(e=>t.indexOf(e)!==-1));let n={};return Object.keys(this.items).forEach(e=>{t.indexOf(e)!==-1&&(n[e]=this.items[e])}),new Collection(n)}pad(e,t){let n=Math.abs(e),r=this.count();if(n<=r)return this;let i=n-r,a=clone(this.items),o=Array.isArray(this.items),s=e<0;for(let e=0;e<i;)o?s?a.unshift(t):a.push(t):a[e]===void 0?a[e]=t:i+=1,e+=1;return new Collection(a)}partition(e){let t;return Array.isArray(this.items)?(t=[new Collection([]),new Collection([])],this.items.forEach(n=>{e(n)===!0?t[0].push(n):t[1].push(n)})):(t=[new Collection({}),new Collection({})],Object.keys(this.items).forEach(n=>{let r=this.items[n];e(r)===!0?t[0].put(n,r):t[1].put(n,r)})),new Collection(t)}pipe(e){return e(this)}pluck(e,t){if(e.indexOf(`*`)!==-1){let n=buildKeyPathMap(this.items),r=[];if(t!==void 0){let e=RegExp(`0.${String(t)}`,`g`),i=`0.${String(t)}`.split(`.`).length;Object.keys(n).forEach(t=>{let a=t.match(e);if(a){let e=a[0];e.split(`.`).length===i&&r.push(n[e])}})}let i=[],a=RegExp(`0.${e}`,`g`),o=`0.${e}`.split(`.`).length;if(Object.keys(n).forEach(e=>{let t=e.match(a);if(t){let e=t[0];e.split(`.`).length===o&&i.push(n[e])}}),t!==void 0){let e={};return this.items.forEach((t,n)=>{e[r[n]||``]=i}),new Collection(e)}return new Collection([i])}if(t!==void 0){let n={};return this.items.forEach(r=>{nestedValue(r,e)===void 0?n[r[t]||``]=null:n[r[t]||``]=nestedValue(r,e)}),new Collection(n)}return this.map(t=>nestedValue(t,e)===void 0?null:nestedValue(t,e))}pop(e=1){if(!this.isEmpty()){if(isArray(this.items))return e===1?this.items.pop():new Collection(this.items.splice(-e));if(isObject(this.items)){let t=Object.keys(this.items);if(e===1){let e=t[t.length-1],n=this.items[e];return deleteKeys(this.items,e),n}let n=t.slice(-e),r=n.reduce((e,t)=>(e[t]=this.items[t],e),{});return deleteKeys(this.items,n),new Collection(r)}}}prepend(e,t){return t===void 0?(this.items.unshift(e),this):this.put(t,e)}pull(e,t){let n=this.items[e]||null;return!n&&t!==void 0&&(n=isFunction(t)?t():t),delete this.items[e],n}push(...e){return this.items.push(...e),this}put(e,t){return this.items[e]=t,this}random(e){let t=new Collection(values(this.items)).shuffle();return!e||e!==parseInt(String(e),10)?t.first():t.take(e)}reduce(e,t){let n=null;return t!==void 0&&(n=t),Array.isArray(this.items)?this.items.forEach((t,r)=>{n=e(n,t,r)}):Object.keys(this.items).forEach(t=>{n=e(n,this.items[t],t)}),n}reject(e){return new Collection(this.items).filter(t=>!e(t))}replace(e){return e?Array.isArray(e)?new Collection(this.items.map((t,n)=>e[n]||t)):e instanceof Collection?new Collection({...this.items,...e.all()}):new Collection({...this.items,...e}):this}replaceRecursive(e){let replace=(e,t)=>{let n={...e};return Object.keys({...e,...t}).forEach(r=>{!Array.isArray(t[r])&&typeof t[r]==`object`?n[r]=replace(e[r],t[r]):e[r]===void 0&&t[r]!==void 0?typeof e[r]==`object`?n[r]={...t[r]}:n[r]=t[r]:e[r]!==void 0&&t[r]===void 0?typeof e[r]==`object`?n[r]={...e[r]}:n[r]=e[r]:e[r]!==void 0&&t[r]!==void 0&&(typeof t[r]==`object`?n[r]={...t[r]}:n[r]=t[r])}),n};return e?!Array.isArray(e)&&typeof e!=`object`?new Collection(replace(this.items,[e])):e instanceof Collection?new Collection(replace(this.items,e.all())):new Collection(replace(this.items,e)):this}reverse(){return new Collection(Array.isArray(this.items)?[].concat(this.items).reverse():Object.fromEntries(Object.entries(this.items).reverse()))}search(e,t){let n,find=(n,r)=>isFunction(e)?e(this.items[r],r):t?this.items[r]===e:this.items[r]==e;return isArray(this.items)?n=this.items.findIndex(find):isObject(this.items)&&(n=Object.keys(this.items).find(e=>find(this.items[e],e))),n===void 0||n<0?!1:n}shift(e=1){if(!this.isEmpty()){if(isArray(this.items))return e===1?this.items.shift():new Collection(this.items.splice(0,e));if(isObject(this.items)){if(e===1){let e=Object.keys(this.items)[0],t=this.items[e];return delete this.items[e],t}let t=Object.keys(this.items).slice(0,e),n=t.reduce((e,t)=>(e[t]=this.items[t],e),{});return deleteKeys(this.items,t),new Collection(n)}}}shuffle(){let e=values(this.items),t,n,r;for(r=e.length;r;--r)t=Math.floor(Math.random()*r),n=e[r-1],e[r-1]=e[t],e[t]=n;return this.items=e,this}skip(e){return isObject(this.items)?new Collection(Object.keys(this.items).reduce((t,n,r)=>(r+1>e&&(t[n]=this.items[n]),t),{})):new Collection(this.items.slice(e))}skipUntil(e){let t=null,n,callback=t=>t===e;return isFunction(e)&&(callback=e),isArray(this.items)&&(n=this.items.filter(e=>(t!==!0&&(t=callback(e)),t))),isObject(this.items)&&(n=Object.keys(this.items).reduce((e,n)=>(t!==!0&&(t=callback(this.items[n])),t!==!1&&(e[n]=this.items[n]),e),{})),new Collection(n)}skipWhile(e){let t=null,n,callback=t=>t===e;return isFunction(e)&&(callback=e),isArray(this.items)&&(n=this.items.filter(e=>(t!==!0&&(t=!callback(e)),t))),isObject(this.items)&&(n=Object.keys(this.items).reduce((e,n)=>(t!==!0&&(t=!callback(this.items[n])),t!==!1&&(e[n]=this.items[n]),e),{})),new Collection(n)}slice(e,t){let n=this.items.slice(e);return t!==void 0&&(n=n.slice(0,t)),new Collection(n)}sole(e,t,n){let r;if(r=isFunction(e)?this.filter(e):this.where(e,t,n),r.isEmpty())throw Error(`Item not found.`);if(r.count()>1)throw Error(`Multiple items found.`);return r.first()}some(e,t){return this.contains(e,t)}sort(e){let t=[].concat(this.items);return e===void 0?this.every(e=>typeof e==`number`)?t.sort((e,t)=>e-t):t.sort():t.sort(e),new Collection(t)}sortBy(e){if(isArray(e))return this.sortByMany(e);let t=[].concat(this.items),getValue=t=>isFunction(e)?e(t):nestedValue(t,e);return t.sort((e,t)=>{let n=getValue(e),r=getValue(t);return n==null?1:r==null||n<r?-1:n>r?1:0}),new Collection(t)}sortByDesc(e){return this.sortBy(e).reverse()}sortByMany(e){let getValue=(e,t)=>isFunction(t)?t(e):nestedValue(e,t),t=[].concat(this.items);return t.sort((t,n)=>{for(let r=0;r<e.length;r+=1){let i=e[r],a=getValue(t,i),o=getValue(n,i);if(a==null)return 1;if(o==null||a<o)return-1;if(a>o)return 1}return 0}),new Collection(t)}sortDesc(){return this.sort().reverse()}sortKeys(){let e={};return Object.keys(this.items).sort().forEach(t=>{e[t]=this.items[t]}),new Collection(e)}sortKeysDesc(){let e={};return Object.keys(this.items).sort().reverse().forEach(t=>{e[t]=this.items[t]}),new Collection(e)}splice(e,t,n){let r=this.slice(e,t);if(this.items=this.diff(r.all()).all(),Array.isArray(n))for(let t=0,{length:r}=n;t<r;t+=1)this.items.splice(e+t,0,n[t]);return r}split(e){let t=Math.round(this.items.length/e),n=JSON.parse(JSON.stringify(this.items)),r=[];for(let i=0;i<e;i+=1)r.push(new Collection(n.splice(0,t)));return new Collection(r)}sum(e){let t=values(this.items),n=0;if(e===void 0)for(let e=0,{length:r}=t;e<r;e+=1)n+=parseFloat(t[e]);else if(isFunction(e))for(let r=0,{length:i}=t;r<i;r+=1)n+=parseFloat(String(e(t[r])));else for(let r=0,{length:i}=t;r<i;r+=1)n+=parseFloat(t[r][e]);return parseFloat(n.toPrecision(12))}take(e){if(!Array.isArray(this.items)&&typeof this.items==`object`){let t=Object.keys(this.items),n;n=e<0?t.slice(e):t.slice(0,e);let r={};return t.forEach(e=>{n.indexOf(e)!==-1&&(r[e]=this.items[e])}),new Collection(r)}return e<0?new Collection(this.items.slice(e)):new Collection(this.items.slice(0,e))}takeUntil(e){let t=null,n,callback=t=>t===e;return isFunction(e)&&(callback=e),isArray(this.items)&&(n=this.items.filter(e=>(t!==!1&&(t=!callback(e)),t))),isObject(this.items)&&(n=Object.keys(this.items).reduce((e,n)=>(t!==!1&&(t=!callback(this.items[n])),t!==!1&&(e[n]=this.items[n]),e),{})),new Collection(n)}takeWhile(e){let t=null,n,callback=t=>t===e;return isFunction(e)&&(callback=e),isArray(this.items)&&(n=this.items.filter(e=>(t!==!1&&(t=callback(e)),t))),isObject(this.items)&&(n=Object.keys(this.items).reduce((e,n)=>(t!==!1&&(t=callback(this.items[n])),t!==!1&&(e[n]=this.items[n]),e),{})),new Collection(n)}tap(e){return e(this),this}times(e,t){for(let n=1;n<=e;n+=1)this.items.push(t(n));return this}toArray(){function iterate(e,t){let n=[];e instanceof Collection?(e.items.forEach(e=>iterate(e,n)),t.push(n)):Array.isArray(e)?(e.forEach(e=>iterate(e,n)),t.push(n)):t.push(e)}if(Array.isArray(this.items)){let e=[];return this.items.forEach(t=>{iterate(t,e)}),e}return this.values().all()}toJson(){return typeof this.items==`object`&&!Array.isArray(this.items)?JSON.stringify(this.all()):JSON.stringify(this.toArray())}toJSON(){return this.items}static enumerable(e){return e!=null&&typeof e.length==`number`}transform(e){if(Array.isArray(this.items))this.items=this.items.map(e);else{let t={};Object.keys(this.items).forEach(n=>{t[n]=e(this.items[n],n)}),this.items=t}return this}union(e){let t=JSON.parse(JSON.stringify(this.items));return Object.keys(e).forEach(n=>{this.items[n]===void 0&&(t[n]=e[n])}),new Collection(t)}unique(e){let t;if(e===void 0)t=this.items.filter((e,t,n)=>n.indexOf(e)===t);else{t=[];let n=[];for(let r=0,{length:i}=this.items;r<i;r+=1){let i;i=isFunction(e)?e(this.items[r]):this.items[r][e],n.indexOf(i)===-1&&(t.push(this.items[r]),n.push(i))}}return new Collection(t)}unless(e,t,n){if(e){if(n)return n(this)}else return t(this);return this}unwrap(e){return e instanceof Collection?e.all():e}values(){return new Collection(values(this.items))}undot(){if(Array.isArray(this.items))return this;let e={};return Object.keys(this.items).forEach(t=>{if(t.indexOf(`.`)!==-1){let n=e;t.split(`.`).reduce((e,n,r,i)=>(e[n]||(e[n]={}),r===i.length-1&&(e[n]=this.items[t]),e[n]),n),e={...e,...n}}else e[t]=this.items[t]}),new Collection(e)}unlessEmpty(e,t){return this.whenNotEmpty(e,t)}unlessNotEmpty(e,t){return this.whenEmpty(e,t)}when(e,t,n){return e?t(this,e)??this:n?n(this,e)??this:this}whenEmpty(e,t){return Array.isArray(this.items)&&!this.items.length||!Object.keys(this.items).length?e(this):t!==void 0&&(Array.isArray(this.items)&&this.items.length||Object.keys(this.items).length)?t(this):this}whenNotEmpty(e,t){return Array.isArray(this.items)&&this.items.length||Object.keys(this.items).length?e(this):t!==void 0&&(Array.isArray(this.items)&&!this.items.length||!Object.keys(this.items).length)?t(this):this}where(e,t,n){let r=t,i=n,a=values(this.items);return e===void 0&&t===void 0?new Collection(a.filter(e=>!!e)):t===void 0||t===!0?new Collection(a.filter(t=>nestedValue(t,String(e)))):t===!1?new Collection(a.filter(t=>!nestedValue(t,String(e)))):(n===void 0&&(i=t,r=`===`),new Collection(a.filter(t=>{switch(r){case`==`:return nestedValue(t,String(e))===Number(i)||nestedValue(t,String(e))==i;default:case`===`:return nestedValue(t,String(e))===i;case`!=`:case`<>`:return nestedValue(t,String(e))!==Number(i)&&nestedValue(t,String(e))!=i;case`!==`:return nestedValue(t,String(e))!==i;case`<`:return nestedValue(t,String(e))<i;case`<=`:return nestedValue(t,String(e))<=i;case`>`:return nestedValue(t,String(e))>i;case`>=`:return nestedValue(t,String(e))>=i}})))}whereBetween(e,t){return this.where(e,`>=`,t[0]).where(e,`<=`,t[t.length-1])}whereIn(e,t){let n=values(t);return new Collection(this.items.filter(t=>n.indexOf(nestedValue(t,String(e)))!==-1))}whereInstanceOf(e){return this.filter(t=>t instanceof e)}whereNotBetween(e,t){return this.filter(n=>nestedValue(n,e)<t[0]||nestedValue(n,e)>t[t.length-1])}whereNotIn(e,t){let n=values(t);return new Collection(this.items.filter(t=>n.indexOf(nestedValue(t,String(e)))===-1))}whereNotNull(e){return this.where(e,`!==`,null)}whereNull(e=null){return this.where(e,`===`,null)}wrap(e){return e instanceof Collection?e:typeof e==`object`?new Collection(e):new Collection([e])}static wrap(e){return this.enumerable(e)?new Collection(e):new Collection(Array.isArray(e)?e:[e])}zip(e){let t=Array.isArray(this.items)?this.items:Object.values(this.items),n=e;return n instanceof Collection&&(n=n.all()),new Collection(t.map((e,t)=>new Collection([e,n[t]])))}[Symbol.iterator](){let e=-1,t=this.items,n=Array.isArray(this.items)?this.items.length:Object.keys(this.items).length;return{next:()=>(e+=1,{value:t[e],done:e>=n})}}};let collect=e=>new c(e);return e.Collection=c,e.collect=collect,e.falsyValue=falsyValue,e.filterArray=filterArray,e.filterObject=filterObject,e.inspect=inspect,e.isArray=isArray,e.isFunction=isFunction,e.isObject=isObject,e})({},window),Collection=collection.Collection,collect=collection.collect;