import e from"node:util";function t(e){if(Array.isArray(e)){if(e.length)return!1}else if(typeof e==`object`&&e){if(Object.keys(e).length)return!1}else if(e)return!1;return!0}function n(e,n={}){let r={};return Object.keys(n).forEach(i=>{e?e(n[i],i)&&(r[i]=n[i]):t(n[i])||(r[i]=n[i])}),r}function r(e,n={}){if(e)return n.filter(e);let r=[];for(let e=0;e<n.length;e+=1){let i=n[e];t(i)||r.push(i)}return r}const i=e=>Array.isArray(e),a=e=>typeof e==`object`&&Array.isArray(e)===!1&&e!==null,o=e=>typeof e==`function`;function s(e){let t={};return e.forEach((e,n)=>{function r(e,n){a(e)?Object.keys(e).forEach(t=>{r(e[t],`${n}.${t}`)}):i(e)&&e.forEach((e,t)=>{r(e,`${n}.${t}`)}),t[n]=e}r(e,String(n))}),t}function c(e){return Array.isArray(e)?[...e]:{...e}}function l(e){return Array.isArray(e[0])?e[0]:e}function u(e,...t){l(t).forEach(t=>{delete e[t]})}function d(e){let t=[];return Array.isArray(e)?t.push(...e):e.constructor.name===`Collection`?t.push(...e.all()):typeof e==`object`&&t.push(...Object.values(e)),t}const f=t=>e.inspect(t,{showHidden:!1,depth:2,colors:!0,compact:!0});function p(e,t){try{return t.split(`.`).reduce((e,t)=>e[t],e)}catch{return e}}var m=class e{items;constructor(t){t!==void 0&&!Array.isArray(t)&&typeof t!=`object`?this.items=[t]:t instanceof e?this.items=t.all():this.items=t||[]}add(e){return this.items.push(e),this}all(){return this.items}average(e){return this.avg(e)}avg(t){return Array.isArray(this.items)?t===void 0?this.sum()/this.items.length:o(t)?new e(this.items).sum(t)/this.items.length:new e(this.items).pluck(t).sum()/this.items.length:0}chunk(t){let n=[],r=0;if(Array.isArray(this.items))do{let i=new e(this.items.slice(r,r+t));n.push(i),r+=t}while(r<this.items.length);else if(typeof this.items==`object`){let i=Object.keys(this.items);do{let a=i.slice(r,r+t),o=new e({});a.forEach(e=>o.put(e,this.items[e])),n.push(o),r+=t}while(r<i.length)}else n.push(new e([this.items]));return new e(n)}collapse(){return new e([].concat(...d(this.items)))}combine(t){let n=t;n instanceof e&&(n=t instanceof e?t.all():t);let r={};return Array.isArray(this.items)&&Array.isArray(n)?this.items.forEach((e,t)=>{r[e]=n[t]}):typeof this.items==`object`&&typeof n==`object`?Object.keys(this.items).forEach((e,t)=>{r[this.items[e]]=n[Object.keys(n)[t]]}):Array.isArray(this.items)?r[this.items[0]]=n:typeof this.items==`string`&&Array.isArray(n)?[r[this.items]]=n:typeof this.items==`string`&&(r[this.items]=n),new e(r)}concat(t){let n;n=t instanceof e?t.all():Array.isArray(t)?t:[...Object.values(t)];let r=new e(c(this.items));return n.forEach(e=>{a(e)?Object.keys(e).forEach(t=>r.push(e[t])):r.push(e)}),r}contains(e,t){if(t!==void 0)return Array.isArray(this.items)?this.items.filter(n=>n[e]!==void 0&&n[e]===t).length>0:this.items[e]!==void 0&&this.items[e]===t;if(o(e))return Array.isArray(this.items)?this.items.filter((t,n)=>e(t,n)).length>0:Object.entries(this.items).filter((t,n)=>e(t,n)).length>0;if(Array.isArray(this.items))return this.items.indexOf(e)!==-1;let n=d(this.items);return n.push(...Object.keys(this.items)),n.indexOf(e)!==-1}containsOneItem(){return this.count()===1}count(){let e=0;return Array.isArray(this.items)&&(e=this.items.length),Math.max(Object.keys(this.items).length,e)}countBy(t=e=>e){return new e(this.items).groupBy(t).map(e=>e.count())}crossJoin(...t){function n(t,...r){let i=r[0];i instanceof e&&(i=i.all());let a=r.slice(1),o=!a.length,s=[];for(let e=0;e<i.length;e+=1){let r=t.slice();r.push(i[e]),o?s.push(r):s=s.concat(n(r,...a))}return s}return new e(n([],this.items,...t))}dd(...e){this.dump(e),typeof process<`u`&&process.exit(1)}diff(t){let n;return n=t instanceof e?t.all():t,new e(this.items.filter(e=>n.indexOf(e)===-1))}diffAssoc(t){let n=t;t instanceof e&&(n=t.all());let r={};return Object.keys(this.items).forEach(e=>{(n[e]===void 0||n[e]!==this.items[e])&&(r[e]=this.items[e])}),new e(r)}diffKeys(t){let n;n=t instanceof e?t.all():t;let r=Object.keys(n),i=Object.keys(this.items).filter(e=>r.indexOf(e)===-1);return new e(this.items).only(i)}diffUsing(t,n){let r;return r=Array.isArray(this.items)?this.items:Object.entries(this.items),new e(r.filter(e=>!(t&&t.some(t=>n(Array.isArray(e)?e[1]:e,t)===0))))}doesntContain(e,t){return!this.contains(e,t)}dot(){if(!a(this.items))return this;let t={},n=(e,r)=>{let i=Object.entries(e);for(let e=0;e<i.length;e+=1){let[o,s]=i[e],c=o;r&&(c=r+`.`+c),a(s)?n(s,c):t[c]=s}};return n(this.items),new e(t)}dump(...e){return console.log(f(this)),e.forEach(e=>{console.log(f(e))}),this}duplicates(){let t=[],n={},r=e=>Array.isArray(e)||typeof e==`object`?JSON.stringify(e):e;return Array.isArray(this.items)?this.items.forEach((e,i)=>{let a=r(e);t.indexOf(a)===-1?t.push(a):n[i]=e}):typeof this.items==`object`&&Object.keys(this.items).forEach(e=>{let i=r(this.items[e]);t.indexOf(i)===-1?t.push(i):n[e]=this.items[e]}),new e(n)}each(e){let t=!1;if(Array.isArray(this.items)){let{length:n}=this.items;for(let r=0;r<n&&!t;r+=1)t=e(this.items[r],r,this.items)===!1}else{let n=Object.keys(this.items),{length:r}=n;for(let i=0;i<r&&!t;i+=1){let r=n[i];t=e(this.items[r],r,this.items)===!1}}return this}eachSpread(e){return this.each((t,n)=>{e(...t,n)}),this}every(e){return d(this.items).every(e)}except(...t){let n=l(t);if(Array.isArray(this.items))return new e(this.items.filter(e=>n.indexOf(e)===-1));let r={};return Object.keys(this.items).forEach(e=>{n.indexOf(e)===-1&&(r[e]=this.items[e])}),new e(r)}filter(t){let i=t||!1,a=null;return a=Array.isArray(this.items)?r(i,this.items):n(i,this.items),new e(a)}first(e,t){if(o(e)){let n=Object.keys(this.items);for(let t=0;t<n.length;t+=1){let r=n[t],i=this.items[r];if(e(i,r))return i}return o(t)?t():t}if(Array.isArray(this.items)&&this.items.length||Object.keys(this.items).length){if(Array.isArray(this.items))return this.items[0];let e=Object.keys(this.items)[0];return this.items[e]}return o(t)?t():t}firstOrFail(e,t,n){if(o(e))return this.first(e,()=>{throw Error(`Item not found.`)});let r=this.where(e,t,n);if(r.isEmpty())throw Error(`Item not found.`);return r.first()}firstWhere(e,t,n){return this.where(e,t,n).first()}flatMap(e){return this.map(e).collapse()}flatten(t){let n=t||1/0,r=!1,o=[],s=function(e){o=[],i(e)?e.forEach(e=>{i(e)?o=o.concat(e):a(e)?Object.keys(e).forEach(t=>{o=o.concat(e[t])}):o.push(e)}):Object.keys(e).forEach(t=>{i(e[t])?o=o.concat(e[t]):a(e[t])?Object.keys(e[t]).forEach(n=>{o=o.concat(e[t][n])}):o.push(e[t])}),r=o.filter(e=>a(e)).length===0,--n};for(s(this.items);!r&&n>0;)s(o);return new e(o)}flip(){let t={};return Array.isArray(this.items)?Object.keys(this.items).forEach(e=>{t[this.items[e]]=Number(e)}):Object.keys(this.items).forEach(e=>{t[this.items[e]]=e}),new e(t)}forget(e){return Array.isArray(this.items)?this.items.splice(e,1):delete this.items[e],this}forPage(t,n){let r={};return Array.isArray(this.items)?r=this.items.slice(t*n-n,t*n):Object.keys(this.items).slice(t*n-n,t*n).forEach(e=>{r[e]=this.items[e]}),new e(r)}get(e,t){if(this.items[e]!==void 0)return this.items[e];if(o(t))return t();if(t!==null)return t}groupBy(t){let n={};return Array.isArray(this.items)?this.items.forEach((r,i)=>{let a;a=o(t)?t(r,i):p(r,t)||p(r,t)===0?p(r,t):``,n[a]===void 0&&(n[a]=new e([])),n[a].push(r)}):Object.keys(this.items).forEach(r=>{let i;i=o(t)?t(this.items[r],r):p(this.items[r],t)||p(this.items[r],t)===0?p(this.items[r],t):``,n[i]===void 0&&(n[i]=new e([])),n[i].push(this.items[r])}),new e(n)}has(...e){let t=l(e);return t.filter(e=>Object.hasOwnProperty.call(this.items,e)).length===t.length}implode(t,n){return n===void 0&&Array.isArray(this.items)?this.items.join(String(t)):new e(this.items).pluck(t).all().join(n)}intersect(t){let n=t;return t instanceof e&&(n=t.all()),new e(this.items.filter(e=>n.indexOf(e)!==-1))}intersectByKeys(t){let n=Object.keys(t);t instanceof this.constructor&&(n=Object.keys(t.all()));let r={};return Object.keys(this.items).forEach(e=>{n.indexOf(e)!==-1&&(r[e]=this.items[e])}),new e(r)}isEmpty(){return Array.isArray(this.items)?!this.items.length:!Object.keys(this.items).length}isNotEmpty(){return!this.isEmpty()}join(e,t){let n=this.values();if(t===void 0)return n.implode(e);let r=n.count();if(r===0)return``;if(r===1)return n.last();let i=n.pop();return n.implode(e)+t+i}keyBy(t){let n={};return o(t)?this.items.forEach(e=>{n[t(e)]=e}):this.items.forEach(e=>{let r=p(e,t);n[r||``]=e}),new e(n)}keys(){let t=Object.keys(this.items);return Array.isArray(this.items)&&(t=t.map(Number)),new e(t)}last(e,t){let{items:n}=this;if(o(e)&&(n=this.filter(e).all()),Array.isArray(n)&&!n.length||!Object.keys(n).length)return o(t)?t():t;if(Array.isArray(n))return n[n.length-1];let r=Object.keys(n);return n[r[r.length-1]]}macro(e,t){this.constructor.prototype[e]=t}make(t=[]){return new e(t)}map(t){if(Array.isArray(this.items))return new e(this.items.map(t));let n={};return Object.entries(this.items).forEach(([e,r])=>{n[e]=t(r,e)}),new e(n)}mapInto(e){return this.map((t,n)=>new e(t,n))}mapSpread(e){return this.map((t,n)=>e(...t,n))}mapToDictionary(t){let n={};return this.items.forEach((e,r)=>{let[i,a]=t(e,r);n[i]===void 0?n[i]=[a]:n[i].push(a)}),new e(n)}mapToGroups(t){let n={};return this.items.forEach((e,r)=>{let[i,a]=t(e,r);n[i]===void 0?n[i]=[a]:n[i].push(a)}),new e(n)}mapWithKeys(t){let n={};return Array.isArray(this.items)?this.items.forEach((e,r)=>{let[i,a]=t(e,r);n[i]=a}):Object.keys(this.items).forEach(e=>{let[r,i]=t(this.items[e],e);n[r]=i}),new e(n)}max(e){if(typeof e==`string`){let t=this.items.filter(t=>t[e]!==void 0);return Math.max(...t.map(t=>t[e]))}return Math.max(...this.items)}median(e){let{length:t}=this.items;return e===void 0?t%2==0?(this.items[t/2-1]+this.items[t/2])/2:this.items[Math.floor(t/2)]:t%2==0?(this.items[t/2-1][e]+this.items[t/2][e])/2:this.items[Math.floor(t/2)][e]}merge(t){let n=t;if(typeof n==`string`&&(n=[n]),Array.isArray(this.items)&&Array.isArray(n))return new e(this.items.concat(n));let r=JSON.parse(JSON.stringify(this.items));return Object.keys(n).forEach(e=>{r[e]=n[e]}),new e(r)}mergeRecursive(t){let n=(e,t)=>{let r={};return Object.keys({...e,...t}).forEach(i=>{e[i]===void 0&&t[i]!==void 0?r[i]=t[i]:e[i]!==void 0&&t[i]===void 0?r[i]=e[i]:e[i]!==void 0&&t[i]!==void 0&&(e[i]===t[i]?r[i]=e[i]:!Array.isArray(e[i])&&typeof e[i]==`object`&&!Array.isArray(t[i])&&typeof t[i]==`object`?r[i]=n(e[i],t[i]):r[i]=[].concat(e[i],t[i]))}),r};return t?t instanceof e?new e(n(this.items,t.all())):new e(n(this.items,t)):this}min(e){if(e!==void 0){let t=this.items.filter(t=>t[e]!==void 0);return Math.min(...t.map(t=>t[e]))}return Math.min(...this.items)}mode(e){let t=[],n=1;return this.items.length?(this.items.forEach(r=>{let i=t.filter(t=>e===void 0?t.key===r:t.key===r[e]);if(!i.length)e===void 0?t.push({key:r,count:1}):t.push({key:r[e],count:1});else{i[0].count+=1;let{count:e}=i[0];e>n&&(n=e)}}),t.filter(e=>e.count===n).map(e=>e.key)):null}nth(t,n){return new e(d(this.items).slice(n).filter((e,n)=>n%t===0))}only(...t){let n=l(t);if(Array.isArray(this.items))return new e(this.items.filter(e=>n.indexOf(e)!==-1));let r={};return Object.keys(this.items).forEach(e=>{n.indexOf(e)!==-1&&(r[e]=this.items[e])}),new e(r)}pad(t,n){let r=Math.abs(t),i=this.count();if(r<=i)return this;let a=r-i,o=c(this.items),s=Array.isArray(this.items),l=t<0;for(let e=0;e<a;)s?l?o.unshift(n):o.push(n):o[e]===void 0?o[e]=n:a+=1,e+=1;return new e(o)}partition(t){let n;return Array.isArray(this.items)?(n=[new e([]),new e([])],this.items.forEach(e=>{t(e)===!0?n[0].push(e):n[1].push(e)})):(n=[new e({}),new e({})],Object.keys(this.items).forEach(e=>{let r=this.items[e];t(r)===!0?n[0].put(e,r):n[1].put(e,r)})),new e(n)}pipe(e){return e(this)}pluck(t,n){if(t.indexOf(`*`)!==-1){let r=s(this.items),i=[];if(n!==void 0){let e=RegExp(`0.${String(n)}`,`g`),t=`0.${String(n)}`.split(`.`).length;Object.keys(r).forEach(n=>{let a=n.match(e);if(a){let e=a[0];e.split(`.`).length===t&&i.push(r[e])}})}let a=[],o=RegExp(`0.${t}`,`g`),c=`0.${t}`.split(`.`).length;if(Object.keys(r).forEach(e=>{let t=e.match(o);if(t){let e=t[0];e.split(`.`).length===c&&a.push(r[e])}}),n!==void 0){let t={};return this.items.forEach((e,n)=>{t[i[n]||``]=a}),new e(t)}return new e([a])}if(n!==void 0){let r={};return this.items.forEach(e=>{p(e,t)===void 0?r[e[n]||``]=null:r[e[n]||``]=p(e,t)}),new e(r)}return this.map(e=>p(e,t)===void 0?null:p(e,t))}pop(t=1){if(!this.isEmpty()){if(i(this.items))return t===1?this.items.pop():new e(this.items.splice(-t));if(a(this.items)){let n=Object.keys(this.items);if(t===1){let e=n[n.length-1],t=this.items[e];return u(this.items,e),t}let r=n.slice(-t),i=r.reduce((e,t)=>(e[t]=this.items[t],e),{});return u(this.items,r),new e(i)}}}prepend(e,t){return t===void 0?(this.items.unshift(e),this):this.put(t,e)}pull(e,t){let n=this.items[e]||null;return!n&&t!==void 0&&(n=o(t)?t():t),delete this.items[e],n}push(...e){return this.items.push(...e),this}put(e,t){return this.items[e]=t,this}random(t){let n=new e(d(this.items)).shuffle();return!t||t!==parseInt(String(t),10)?n.first():n.take(t)}reduce(e,t){let n=null;return t!==void 0&&(n=t),Array.isArray(this.items)?this.items.forEach((t,r)=>{n=e(n,t,r)}):Object.keys(this.items).forEach(t=>{n=e(n,this.items[t],t)}),n}reject(t){return new e(this.items).filter(e=>!t(e))}replace(t){return t?Array.isArray(t)?new e(this.items.map((e,n)=>t[n]||e)):t instanceof e?new e({...this.items,...t.all()}):new e({...this.items,...t}):this}replaceRecursive(t){let n=(e,t)=>{let r={...e};return Object.keys({...e,...t}).forEach(i=>{!Array.isArray(t[i])&&typeof t[i]==`object`?r[i]=n(e[i],t[i]):e[i]===void 0&&t[i]!==void 0?typeof e[i]==`object`?r[i]={...t[i]}:r[i]=t[i]:e[i]!==void 0&&t[i]===void 0?typeof e[i]==`object`?r[i]={...e[i]}:r[i]=e[i]:e[i]!==void 0&&t[i]!==void 0&&(typeof t[i]==`object`?r[i]={...t[i]}:r[i]=t[i])}),r};return t?!Array.isArray(t)&&typeof t!=`object`?new e(n(this.items,[t])):t instanceof e?new e(n(this.items,t.all())):new e(n(this.items,t)):this}reverse(){return new e(Array.isArray(this.items)?[].concat(this.items).reverse():Object.fromEntries(Object.entries(this.items).reverse()))}search(e,t){let n,r=(n,r)=>o(e)?e(this.items[r],r):t?this.items[r]===e:this.items[r]==e;return i(this.items)?n=this.items.findIndex(r):a(this.items)&&(n=Object.keys(this.items).find(e=>r(this.items[e],e))),n===void 0||n<0?!1:n}shift(t=1){if(!this.isEmpty()){if(i(this.items))return t===1?this.items.shift():new e(this.items.splice(0,t));if(a(this.items)){if(t===1){let e=Object.keys(this.items)[0],t=this.items[e];return delete this.items[e],t}let n=Object.keys(this.items).slice(0,t),r=n.reduce((e,t)=>(e[t]=this.items[t],e),{});return u(this.items,n),new e(r)}}}shuffle(){let e=d(this.items),t,n,r;for(r=e.length;r;--r)t=Math.floor(Math.random()*r),n=e[r-1],e[r-1]=e[t],e[t]=n;return this.items=e,this}skip(t){return a(this.items)?new e(Object.keys(this.items).reduce((e,n,r)=>(r+1>t&&(e[n]=this.items[n]),e),{})):new e(this.items.slice(t))}skipUntil(t){let n=null,r,s=e=>e===t;return o(t)&&(s=t),i(this.items)&&(r=this.items.filter(e=>(n!==!0&&(n=s(e)),n))),a(this.items)&&(r=Object.keys(this.items).reduce((e,t)=>(n!==!0&&(n=s(this.items[t])),n!==!1&&(e[t]=this.items[t]),e),{})),new e(r)}skipWhile(t){let n=null,r,s=e=>e===t;return o(t)&&(s=t),i(this.items)&&(r=this.items.filter(e=>(n!==!0&&(n=!s(e)),n))),a(this.items)&&(r=Object.keys(this.items).reduce((e,t)=>(n!==!0&&(n=!s(this.items[t])),n!==!1&&(e[t]=this.items[t]),e),{})),new e(r)}slice(t,n){let r=this.items.slice(t);return n!==void 0&&(r=r.slice(0,n)),new e(r)}sole(e,t,n){let r;if(r=o(e)?this.filter(e):this.where(e,t,n),r.isEmpty())throw Error(`Item not found.`);if(r.count()>1)throw Error(`Multiple items found.`);return r.first()}some(e,t){return this.contains(e,t)}sort(t){let n=[].concat(this.items);return t===void 0?this.every(e=>typeof e==`number`)?n.sort((e,t)=>e-t):n.sort():n.sort(t),new e(n)}sortBy(t){if(i(t))return this.sortByMany(t);let n=[].concat(this.items),r=e=>o(t)?t(e):p(e,t);return n.sort((e,t)=>{let n=r(e),i=r(t);return n==null?1:i==null||n<i?-1:n>i?1:0}),new e(n)}sortByDesc(e){return this.sortBy(e).reverse()}sortByMany(t){let n=(e,t)=>o(t)?t(e):p(e,t),r=[].concat(this.items);return r.sort((e,r)=>{for(let i=0;i<t.length;i+=1){let a=t[i],o=n(e,a),s=n(r,a);if(o==null)return 1;if(s==null||o<s)return-1;if(o>s)return 1}return 0}),new e(r)}sortDesc(){return this.sort().reverse()}sortKeys(){let t={};return Object.keys(this.items).sort().forEach(e=>{t[e]=this.items[e]}),new e(t)}sortKeysDesc(){let t={};return Object.keys(this.items).sort().reverse().forEach(e=>{t[e]=this.items[e]}),new e(t)}splice(e,t,n){let r=this.slice(e,t);if(this.items=this.diff(r.all()).all(),Array.isArray(n))for(let t=0,{length:r}=n;t<r;t+=1)this.items.splice(e+t,0,n[t]);return r}split(t){let n=Math.round(this.items.length/t),r=JSON.parse(JSON.stringify(this.items)),i=[];for(let a=0;a<t;a+=1)i.push(new e(r.splice(0,n)));return new e(i)}sum(e){let t=d(this.items),n=0;if(e===void 0)for(let e=0,{length:r}=t;e<r;e+=1)n+=parseFloat(t[e]);else if(o(e))for(let r=0,{length:i}=t;r<i;r+=1)n+=parseFloat(String(e(t[r])));else for(let r=0,{length:i}=t;r<i;r+=1)n+=parseFloat(t[r][e]);return parseFloat(n.toPrecision(12))}take(t){if(!Array.isArray(this.items)&&typeof this.items==`object`){let n=Object.keys(this.items),r;r=t<0?n.slice(t):n.slice(0,t);let i={};return n.forEach(e=>{r.indexOf(e)!==-1&&(i[e]=this.items[e])}),new e(i)}return t<0?new e(this.items.slice(t)):new e(this.items.slice(0,t))}takeUntil(t){let n=null,r,s=e=>e===t;return o(t)&&(s=t),i(this.items)&&(r=this.items.filter(e=>(n!==!1&&(n=!s(e)),n))),a(this.items)&&(r=Object.keys(this.items).reduce((e,t)=>(n!==!1&&(n=!s(this.items[t])),n!==!1&&(e[t]=this.items[t]),e),{})),new e(r)}takeWhile(t){let n=null,r,s=e=>e===t;return o(t)&&(s=t),i(this.items)&&(r=this.items.filter(e=>(n!==!1&&(n=s(e)),n))),a(this.items)&&(r=Object.keys(this.items).reduce((e,t)=>(n!==!1&&(n=s(this.items[t])),n!==!1&&(e[t]=this.items[t]),e),{})),new e(r)}tap(e){return e(this),this}times(e,t){for(let n=1;n<=e;n+=1)this.items.push(t(n));return this}toArray(){function t(n,r){let i=[];n instanceof e?(n.items.forEach(e=>t(e,i)),r.push(i)):Array.isArray(n)?(n.forEach(e=>t(e,i)),r.push(i)):r.push(n)}if(Array.isArray(this.items)){let e=[];return this.items.forEach(n=>{t(n,e)}),e}return this.values().all()}toJson(){return typeof this.items==`object`&&!Array.isArray(this.items)?JSON.stringify(this.all()):JSON.stringify(this.toArray())}toJSON(){return this.items}transform(e){if(Array.isArray(this.items))this.items=this.items.map(e);else{let t={};Object.keys(this.items).forEach(n=>{t[n]=e(this.items[n],n)}),this.items=t}return this}union(t){let n=JSON.parse(JSON.stringify(this.items));return Object.keys(t).forEach(e=>{this.items[e]===void 0&&(n[e]=t[e])}),new e(n)}unique(t){let n;if(t===void 0)n=this.items.filter((e,t,n)=>n.indexOf(e)===t);else{n=[];let e=[];for(let r=0,{length:i}=this.items;r<i;r+=1){let i;i=o(t)?t(this.items[r]):this.items[r][t],e.indexOf(i)===-1&&(n.push(this.items[r]),e.push(i))}}return new e(n)}unless(e,t,n){if(e){if(n)return n(this)}else return t(this);return this}unwrap(t){return t instanceof e?t.all():t}values(){return new e(d(this.items))}undot(){if(Array.isArray(this.items))return this;let t={};return Object.keys(this.items).forEach(e=>{if(e.indexOf(`.`)!==-1){let n=t;e.split(`.`).reduce((t,n,r,i)=>(t[n]||(t[n]={}),r===i.length-1&&(t[n]=this.items[e]),t[n]),n),t={...t,...n}}else t[e]=this.items[e]}),new e(t)}unlessEmpty(e,t){return this.whenNotEmpty(e,t)}unlessNotEmpty(e,t){return this.whenEmpty(e,t)}when(e,t,n){return e?t(this,e):n?n(this,e):this}whenEmpty(e,t){return Array.isArray(this.items)&&!this.items.length||!Object.keys(this.items).length?e(this):t!==void 0&&(Array.isArray(this.items)&&this.items.length||Object.keys(this.items).length)?t(this):this}whenNotEmpty(e,t){return Array.isArray(this.items)&&this.items.length||Object.keys(this.items).length?e(this):t!==void 0&&(Array.isArray(this.items)&&!this.items.length||!Object.keys(this.items).length)?t(this):this}where(t,n,r){let i=n,a=r,o=d(this.items);return t===void 0&&n===void 0?new e(o.filter(e=>!!e)):n===void 0||n===!0?new e(o.filter(e=>p(e,String(t)))):n===!1?new e(o.filter(e=>!p(e,String(t)))):(r===void 0&&(a=n,i=`===`),new e(o.filter(e=>{switch(i){case`==`:return p(e,String(t))===Number(a)||p(e,String(t))==a;default:case`===`:return p(e,String(t))===a;case`!=`:case`<>`:return p(e,String(t))!==Number(a)&&p(e,String(t))!=a;case`!==`:return p(e,String(t))!==a;case`<`:return p(e,String(t))<a;case`<=`:return p(e,String(t))<=a;case`>`:return p(e,String(t))>a;case`>=`:return p(e,String(t))>=a}})))}whereBetween(e,t){return this.where(e,`>=`,t[0]).where(e,`<=`,t[t.length-1])}whereIn(t,n){let r=d(n);return new e(this.items.filter(e=>r.indexOf(p(e,String(t)))!==-1))}whereInstanceOf(e){return this.filter(t=>t instanceof e)}whereNotBetween(e,t){return this.filter(n=>p(n,e)<t[0]||p(n,e)>t[t.length-1])}whereNotIn(t,n){let r=d(n);return new e(this.items.filter(e=>r.indexOf(p(e,String(t)))===-1))}whereNotNull(e){return this.where(e,`!==`,null)}whereNull(e=null){return this.where(e,`===`,null)}wrap(t){return t instanceof e?t:typeof t==`object`?new e(t):new e([t])}zip(t){let n=Array.isArray(this.items)?this.items:Object.values(this.items),r=t;return r instanceof e&&(r=r.all()),new e(n.map((t,n)=>new e([t,r[n]])))}[Symbol.iterator](){let e=-1,t=this.items,n=Array.isArray(this.items)?this.items.length:Object.keys(this.items).length;return{next:()=>(e+=1,{value:t[e],done:e>=n})}}};const h=e=>new m(e);export{m as Collection,h as collect,t as falsyValue,r as filterArray,n as filterObject,f as inspect,i as isArray,o as isFunction,a as isObject};
//# sourceMappingURL=index.js.map